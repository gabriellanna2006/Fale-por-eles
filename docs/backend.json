{
  "entities": {
    "IncidentReport": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "IncidentReport",
      "type": "object",
      "description": "Represents a report of an animal abuse incident.",
      "properties": {
        "description": {
          "type": "string",
          "description": "Detailed description of the incident."
        },
        "location": {
          "type": "string",
          "description": "Location where the incident occurred."
        },
        "mediaUrls": {
          "type": "array",
          "description": "URLs of media files (images, videos) related to the incident.",
          "items": {
            "type": "string"
          }
        },
        "reportDate": {
          "type": "string",
          "description": "Date and time when the report was submitted.",
          "format": "date-time"
        },
        "reporterName": {
          "type": "string",
          "description": "Name of the person reporting the incident."
        },
        "reporterContact": {
          "type": "string",
          "description": "Contact information of the person reporting the incident."
        },
        "aiAnalysis": {
          "type": "object",
          "description": "Analysis from the AI model.",
          "properties": {
            "abuseEstimate": {
              "type": "string"
            },
            "resources": {
              "type": "string"
            }
          }
        }
      },
      "required": [
        "description",
        "location",
        "reportDate"
      ]
    },
    "AnimalWelfareResource": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AnimalWelfareResource",
      "type": "object",
      "description": "Represents an animal welfare resource, such as a shelter or vet.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resource."
        },
        "name": {
          "type": "string",
          "description": "Name of the animal welfare resource."
        },
        "description": {
          "type": "string",
          "description": "Description of the services offered by the resource."
        },
        "address": {
          "type": "string",
          "description": "Address of the resource."
        },
        "contact": {
          "type": "string",
          "description": "Contact information for the resource."
        },
        "website": {
          "type": "string",
          "description": "Website URL for the resource.",
          "format": "uri"
        },
        "category": {
          "type": "string",
          "description": "Category of the resource (e.g., shelter, vet)."
        }
      },
      "required": [
        "id",
        "name",
        "address",
        "contact"
      ]
    },
    "EducationalArticle": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EducationalArticle",
      "type": "object",
      "description": "Represents an educational article or resource.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the article."
        },
        "title": {
          "type": "string",
          "description": "Title of the article."
        },
        "content": {
          "type": "string",
          "description": "Content of the article (HTML or Markdown)."
        },
        "publicationDate": {
          "type": "string",
          "description": "Date when the article was published.",
          "format": "date-time"
        },
        "author": {
          "type": "string",
          "description": "Author of the article."
        },
        "tags": {
          "type": "array",
          "description": "Tags associated with the article.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "publicationDate",
        "author"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/incident_reports/{incidentReportId}",
        "definition": {
          "entityName": "IncidentReport",
          "schema": {
            "$ref": "#/entities/IncidentReport"
          },
          "description": "Stores incident reports. Includes denormalized reporter information (reporterName, reporterContact) for authorization independence.",
          "params": [
            {
              "name": "incidentReportId",
              "description": "Unique identifier for the incident report."
            }
          ]
        }
      },
      {
        "path": "/animal_welfare_resources/{animalWelfareResourceId}",
        "definition": {
          "entityName": "AnimalWelfareResource",
          "schema": {
            "$ref": "#/entities/AnimalWelfareResource"
          },
          "description": "Stores information about animal welfare resources (shelters, vets, etc.).",
          "params": [
            {
              "name": "animalWelfareResourceId",
              "description": "Unique identifier for the animal welfare resource."
            }
          ]
        }
      },
      {
        "path": "/educational_articles/{educationalArticleId}",
        "definition": {
          "entityName": "EducationalArticle",
          "schema": {
            "$ref": "#/entities/EducationalArticle"
          },
          "description": "Stores educational articles related to animal welfare and responsible pet ownership.",
          "params": [
            {
              "name": "educationalArticleId",
              "description": "Unique identifier for the educational article."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the 'Fale Pelos Animais' application, focusing on reporting animal abuse incidents, providing animal welfare resources, and offering educational content. Authorization Independence is achieved by avoiding `get()` calls in security rules. Data segregation ensures each collection has a clear security posture.\n\n*   `/incident_reports`: Stores incident reports with denormalized reporter information (reporterName, reporterContact) to allow for listing reports without needing to access user data. This collection supports QAPs as it does not rely on filtering.\n*   `/animal_welfare_resources`: Stores information about animal welfare resources. This collection is publicly readable, supporting QAPs as no user-specific filtering is required.\n*   `/educational_articles`: Stores educational articles. Similar to resources, these are publicly accessible, also supporting QAPs.\n"
  }
}
